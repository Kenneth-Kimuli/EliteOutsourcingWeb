<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <title>EliteOutsourcing</title>
  <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
  <!-- Core theme CSS (includes Bootstrap)-->
  <link href="src/css/styles.css" rel="stylesheet" />
  <link href="src/css/sidebar.css" rel="stylesheet" />

</head>

<body id="page-top">
  <!-- Navigation-->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
    <div _ngcontent-ure-c8="" class="sb-sidenav-footer">
      <div _ngcontent-ure-c8="" class="small">Logged in as:</div>
      <!---->
      <span _ngcontent-ure-c8="">Start Bootstrap</span>
  </div>
    <div class="container px-4">
        <a class="navbar-brand" href="indexCompany.html">EliteOutsourcing</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link" href="Jobs.html">Jobs</a></li>
                <li class="nav-item"><a class="nav-link" href="Jobs_create.html">Create</a></li>
                <li class="nav-item"><a class="nav-link" href="Stats.html">Stats</a></li>
          </ul>
          <form class="d-flex">
          <button class="btn btn-outline-light" type="submit" onclick="location.href='Applications.html'">
              <i class="bi-cart-fill me-1"></i>
              Log Out
              <span class="badge bg-darkorange text-white ms-1 rounded-pill"></span>
          </button>
          </form>
      </div>
    </div>
  </nav>

  <!-- Header
        <a class="btn btn-lg btn-light" href="#about">Post your Job!</a>
        -->
  <header class="bg-primary bg-gradient text-white">
    <div class="container px-4 text-center">
      <h1 class="fw-bolder">Job Creation</h1>
      <p class="lead">Create and Post a job</p>
    </div>
  </header>

  <!-- Create section-->
  <section id="createjob" class="bg-dark text-white">
    <div class="container px-4">
      <div class="createjobdiv">
        <p class="lead text-center fw-bolder">Fill out the form below to capture details for your Job Post</p>
        <form class="post" target="_blank">
          <label for="industry">Industry:</label><br>
          <select id="industry" class="form-control mb-3" name="industry">
            <option value="null"></option>
            <option value="technology">Technology</option>
            <option value="manufacturing">Manufacturing</option>
            <option value="education">Education</option>
            <option value="hospitality&management">Hospitality & Management</option>
            <option value="health care">Health Care</option>
            <option value="transport">Transport</option>
          </select>
          <label for="title">Title:</label>
          <input type="text" class="form-control mb-3" id="cname" name="title" required>
          <label for="job_type">Job Type:</label><br>
          <select id="job_type" class="form-control mb-3" name="job_type">
            <option value="null"></option>
            <option value="internship">Internship</option>
            <option value="full_time">Full Time</option>
            <option value="part_time">Part Time</option>
            <option value="contract">Contract</option>
          </select>
          <label for="experience">Experience:</label><br>
          <select id="experience" class="form-control mb-3" name="experience">
            <option value="null"></option>
            <option value="intern">Intern</option>
            <option value="associate">Associate</option>
            <option value="intermediate">Intermediate</option>
            <option value="expert">Expert</option>
          </select>
          <label for="salary">Salary:</label>
          <input type="number" id="salary" class="form-control mb-3" name="salary">
          <label for="description">Description</label>
          <textarea class="form-control mb-3" id="description" rows="5" name="description"></textarea>
          <label for="job_image">Add Job Post Image: ( Optional )</label>
          <input type="file" class="form-control-file mb-5" id="job_image" name="job_image">
          <!-- <br><br> -->
          <button type="submit" id="signUp" class="btn btn-primary btn-lg btn-block border fw-bolder"
            style="width: 100%;">POST</button>
        </form>
      </div>
    </div>
  </section>
  <!-- Footer-->
  <footer class="py-5 bg-dark footer">
    <div class="container px-4">
      <p class="m-0 text-center text-white">Copyright &copy; EliteOutsourcing 2021</p>
    </div>
  </footer>
  <!-- Bootstrap core JS-->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Core theme JS-->


  <script type="module">

    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-analytics.js";
    import { getFirestore, collection, getDocs, addDoc } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-firestore.js";
    import { getAuth } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-auth.js";

    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyAo8R3o6meGBHzhfitgkU-2w09aZda3408",
      authDomain: "eliteoutsourcing-cf8c8.firebaseapp.com",
      databaseURL: "https://eliteoutsourcing-cf8c8-default-rtdb.firebaseio.com",
      projectId: "eliteoutsourcing-cf8c8",
      storageBucket: "eliteoutsourcing-cf8c8.appspot.com",
      messagingSenderId: "958077309393",
      appId: "1:958077309393:web:b8c1488d027cc3d18710f0",
      measurementId: "G-3Z89PGSBEG"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth();

    //init service
    const db = getFirestore(app);

    //collection ref
    const colRef = collection(db, 'Jobs');

    //get collection data
    getDocs(colRef)
      .then((snapshot) => {
        let jobs = []
        snapshot.docs.forEach((doc) => {
          jobs.push({ ...doc.data(), id: doc.id })
        })
        console.log(jobs)
      })

      .catch(err => {
        console.log(err.message)
      })

    //adding docs
    const addJobPost = document.querySelector('.post')
    addJobPost.addEventListener('submit', (e) => {
      e.preventDefault()
    
      addDoc(colRef, {
        Industry: addJobPost.industry.value,
        Title: addJobPost.title.value,
        Type: addJobPost.job_type.value,
        Experience: addJobPost.experience.value,
        Salary: addJobPost.salary.value,
        Description: addJobPost.description.value,
        job_image: addJobPost.job_image.value,
      })
      .then(() => {
        addJobPost.reset()
      })
    
    })
  </script>
</body>

</html>